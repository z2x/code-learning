<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>使用降域实现跨域</title>
  <link rel="stylesheet" href="">
  <style>
  .main {
    float: left;
    width: 500px;
    height: 400px;
    border: 1px solid #ccc;
  }

  .main input {
    margin: 10px;
    width: 200px;
  }

  .main iframe {
    float: right;
    width: 500px;
    height: 400px;
  }
  </style>
</head>

<body>
  <h1>使用降域实现跨域</h1>
  <div class="main">
    <input type="text" placeholder="http://localhost:8080/a.html">
  </div>
  <iframe src="http://localhost:8080/b.html" frameborder="0"></iframe>
  <script>
  document.querySelector('.main input').addEventListener('input', function() {
    console.log(this.value);
    window.frames[0].postMessage(this.value, '*');
  });

  window.addEventListener('message', function(e) {
    document.querySelector('.main input').value = e.data;
    console.log(e.data);
  });
  </script>
</body>

</html>
